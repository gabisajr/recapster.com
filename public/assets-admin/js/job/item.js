define(["jquery","autosize","caretEnd","select2","autocomplete","tagEditor"],function(e,t,a){var s=e("form#job-form"),n=s.find(':input[name="apply_type"]'),o=s.find(".form-group.contacts"),i=s.find(".form-group.external_url"),c=o.find(':input[name="contacts"]'),r=i.find(':input[name="external_url"]');c.focus(a),r.focus(a),t(c),n.change(function(){switch(e(this).val()){case"contacts":o.removeClass("hidden"),i.addClass("hidden"),t.update(c),c.focus();break;case"external":i.removeClass("hidden"),o.addClass("hidden"),r.focus();break;default:i.addClass("hidden"),o.addClass("hidden")}}),s.find("#job-company").select2({ajax:{url:"/company/search",cache:!0,processResults:function(e){return{results:e.items}}},minimumInputLength:1}),s.find("#job-position").select2({ajax:{url:"/position/search",cache:!0,processResults:function(e){return{results:e.items}}},minimumInputLength:3}),s.find("textarea#tags").tagEditor(),s.find("textarea#cities").tagEditor({maxTags:5,forceLowercase:!1,autocomplete:{source:function(t,a){e.ajax({type:"POST",dataType:"json",url:"/autocomplete/city",data:{filter:t.term},success:a})}}})});