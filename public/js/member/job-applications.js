require(["/js/common.js"],function(){require(["jquery","i18n","showMessageModal"],function(t,n,e){function a(t,n){n?t.text(n):t.html('<span class="no">--</span>')}var o=t("table#job-applications");o.on("click",".btn-archive",function(n){n.preventDefault();var e=t(this);e.closest("tr").remove(),t.post("/jobApplication/archive/"+e.data("id"),function(n){var e=t("#job-applications-tabs");a(e.find(".count.current"),n.current_count),a(e.find(".count.archive"),n.archive_count)})}),o.on("click",".btn-delete",function(n){n.preventDefault();var e=t(this);e.closest("tr").remove(),t.post("/jobApplication/delete/"+e.data("id"),function(){console.log("done")})});var i=t("#account-menu").find(".job_responses_count");o.find(".apply-status.-invite, .apply-status.-fail").click(function(){var a=t(this),o=a.closest("tr.application-data"),s=n("Ответ работодателя");a.hasClass("-invite")?s=n("Вы приглашены на собеседование"):a.hasClass("-fail")&&(s=n("Ваша кандидатура отклонена"));var c=a.data("response");e(c,s);var r=o.data("id");t.post("/jobApplication/readResponse/"+r,function(t){i.text(t?"(+"+t+")":""),o.removeClass("unread").find(".icon.envelope").remove()})})})});