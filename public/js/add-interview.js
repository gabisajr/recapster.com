require(["/js/common.js"],function(){require(["jquery","async","autosize"],function(e,t,n){var i=e("form#add-interview-form");i.find(".likes-control").each(function(){var t=e(this),n=t.closest(".likes-control-w").find(".likes-control-title"),i=t.find('input[type="radio"]');t.find("li.likes-control-item").mouseenter(function(){n.text(e(this).find("label").data("title"))}),t.mouseleave(function(){n.text(n.data("title")||"")}),i.change(function(){var e=t.find('input[type="radio"]:checked').closest("li.likes-control-item").find("label").data("title");n.text(e).data("title",e)})});var a,o=i.find(".interview-questions");i.find('button[name="add-question"]').click(function(){var i=o.find(".interview-question-fields:last-child").find(".number").data("number");i||(i=0),i+=1,t.waterfall([function(t){if(a)return t(null,a);e.ajax({url:"/tmpl/partials/interview-question-fields",data:{number:i},success:function(e){t(null,a=e)}})},function(t,a){var o=e(t);o.find(".number").data("number",i).text("Вопрос "+i),n(o.find("textarea.autosize")),a(null,o)}],function(e,t){if(e)return window.alert(e);o.append(t),t.find("textarea.questions-text").focus()})}),o.on("click",".delete",function(t){t.preventDefault(),e(this).closest(".question").remove()}),i.find('select[name="source"]').change(function(){var t=e(this).find("option:selected").data("specifiable"),n=i.find('input[name="source_specify"]');t?n.removeClass("hidden").focus():n.addClass("hidden")}),i.find("input#interview-step-other").change(function(){var t=i.find('input[name="step_other"]');e(this).is(":checked")?t.removeClass("hidden").focus():t.addClass("hidden")})})});