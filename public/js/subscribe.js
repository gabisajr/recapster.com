define(["jquery","i18n"],function(e,s){e(document).on("click",".btn-subscribe",function(n){n.preventDefault();var c=e(this),t=c.hasClass("btn-subscribe-company")?"company":c.hasClass("btn-subscribe-user")?"user":null,i=c.data("id");e.ajax({url:"/subscribe",type:"post",data:{type:t,id:i},beforeSend:function(){c.prop("disabled",!0)},complete:function(){c.prop("disabled",!1)},success:function(e){if(e.success)e.subscribed?c.text(s("Вы подписаны")).addClass("btn-success"):c.text(s("Подписаться")).removeClass("btn-success");else if(401==e.code)require(["modal/signin"],function(e){e()});else{var n=e.message||s("Неизвестная ошибка");require(["modal/alert"],function(e){e.error(n)})}}})})});