define(["jquery","showMessageModal","i18n"],function(e,n,t){function a(){n(t("Вы можете только 1 раз голосовать за данный ответ"),t("Вы уже голосовали"))}e(document).on("click",".answer-item .btn-rating",function(n){n.preventDefault();var t=e(this);e.post("/interview/voteQuestionAnswer",t.data(),function(n){if((n=n||{}).success){var i=t.closest(".top-down-rating"),o=i.find(".amount"),d=i.find(".btn-rating-up"),s=i.find(".btn-rating-down");o.text(n.count);var l=n.flag;"up"==l?d.removeClass("light-blue darken-2").addClass("green accent-4"):d.addClass("light-blue darken-2").removeClass("green accent-4"),"down"==l?s.removeClass("light-blue darken-2").addClass("red lighten-1"):s.addClass("light-blue darken-2").removeClass("red lighten-1"),d.prop("disabled",!0),s.prop("disabled",!0)}else{if("ALREADY_VOTED"==n.code)return a();401==n.code?e(".open-login-modal").click():console.log("Неизвестная ошибка")}})}),e(document).on("click",".answer-item .top-down-rating",function(){e(this).find(".btn-rating:disabled").length&&a()})});