define(["jquery","powertip"],function(e,o){var r=e("form#exams-form"),t=r.find(".exams-list"),n=r.find(".btn-submit");r.find(".add-exam").click(function(n){n.preventDefault();var a=r.find(".exam-form-group").length;e.post("/tmpl/edit/exams/form-group",{index:a},function(r){var n=e(r);o(n.find(".powertip")),n.appendTo(t),n.find("input.title").focus()})}),r.on("change",":input",function(){e(this).closest(".has-error").removeClass("has-error")}),r.on("click",".group-delete",function(o){o.preventDefault(),o.stopPropagation(),e(this).closest(".group").remove(),e.post("/exam/delete",e(this).data())}),r.submit(function(o){o.preventDefault(),e.ajax({url:r.attr("action"),data:r.serialize(),type:r.attr("method"),beforeSend:function(){n.prop("disabled",!0),r.find(".has-error").removeClass("has-error")},complete:function(){n.prop("disabled",!1)},success:function(o){if(o.success)window.scrollTo(0,0),window.location.reload();else{e.each(o.errors,function(o,r){var t=e(".exam-form-group").eq(o);e.each(r,function(e,o){t.find(":input."+e).closest(".form-group, .col").addClass("has-error")})});var r=e(".exam-form-group .has-error").eq(0).closest(".exam-form-group");r.length&&e("html, body").animate({scrollTop:r.offset().top},100)}}})})});