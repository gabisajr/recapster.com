define(["jquery","i18n","browser","fileupload","autocomplete","select2"],function(e,t){var n=e("form#edit-personal-form"),i=(n.find(".btn-submit"),n.find(":input#position")),a=n.find(":input#country"),o=n.find(":input#city"),s=n.find(":input#status");!function(){var t=n.find("img.avatar"),i=t.closest(".wrapper"),a=e('<div class="panel-loader"><img src="/images/loading.svg" class="loader"></div>').appendTo(i).hide(),o=n.find('input[name="avatar"]');n.find("input#avatar").fileupload({url:"/user/edit/uploadAvatar",beforeSend:function(){a.fadeIn()},complete:function(){a.fadeOut()},done:function(e,n){console.log(n),n.result.success&&(o.val(n.result.path),t.attr("src",n.result.path))}})}(),s.change(function(){var t=e(this).val(),i=n.find("a.job-search-settings");"search"===t||"ready"===t?i.show():i.hide()}),a.select2({placeholder:t("Выберите страну")}).on("select2:opening",function(){e(this).data("select2").$dropdown.find(":input.select2-search__field").attr("placeholder",t("Начните набирать")+"…")}),o.select2({placeholder:t("Выберите город")}).on("select2:opening",function(){e(this).data("select2").$dropdown.find(":input.select2-search__field").attr("placeholder",t("Начните набирать")+"…")}),a.change(function(){var n=e(this).val();e.ajax({url:"/country/cities",data:{country:n},type:"post",success:function(n){var i='<option value="">'+t("Город")+"</option>";e.each(n,function(e,t){i+='\n<option value="'+t.id+'">'+t.title+"</option>"}),o.html(i)}})}),i.autocompletePosition()});