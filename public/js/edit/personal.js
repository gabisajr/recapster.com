define(["jquery","i18n","autosize","browser","fileupload","selectpicker","autocomplete"],function(e,t,i,n){var a=e("form#edit-personal-form"),o=a.find(".btn-submit"),s=a.find(":input#position"),r=a.find(":input#country"),c=a.find(":input#city"),l=a.find(":input#status");a.find("select").selectpicker(),n.mobile&&a.find("select").selectpicker("mobile"),i(a.find("textarea")),function(){var t=a.find("img.avatar"),i=t.closest(".wrapper"),n=e('<div class="panel-loader"><img src="/images/loading.svg" class="loader"></div>').appendTo(i).hide(),s=a.find('input[name="avatar"]');a.find("input#avatar").fileupload({url:"/upload/photo",beforeSend:function(){n.fadeIn(),o.prop("disabled",!0),e.post("/upload/remove",{path:s.val()})},complete:function(){n.fadeOut(),o.prop("disabled",!1)},done:function(e,i){i.result.success&&(s.val(i.result.path),t.attr("src",i.result.path))}})}(),l.change(function(){var t=e(this).val(),i=a.find("a.job-search-settings");"search"===t||"ready"===t?i.show():i.hide()}),r.change(function(){var i=e(this).val();e.ajax({url:"/country/cities/"+i,type:"POST",success:function(i){var n='<option value="">'+t("Город")+"</option>";e.each(i,function(e,t){n+='\n<option value="'+t.id+'">'+t.title+"</option>"}),c.html(n).selectpicker("refresh")}})}),s.autocompletePosition()});