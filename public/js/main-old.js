define(["jquery","applyAutocomplete"],function(e,t){e(document).on("click",".collapsible .toggle",function(t){t.preventDefault&&t.preventDefault();var n=e(this);n.toggleClass("opened");var o=n.hasClass("opened")?"slideDown":"slideUp";n.closest(".collapsible").find(".toggle-body")[o]()}),require(["keyCodes"],function(t){e(function(){function n(e){e.removeClass("hidden")}function o(e){e.addClass("hidden").find(".multi-errors").remove(),e.find("input.error").removeClass("error")}e("form.esc-hide").keyup(function(n){n.keyCode==t.ESC&&o(e(this))}),e("form .hide-form").click(function(t){t.preventDefault(),o(e(this).closest("form"))}),e(".show-form").click(function(t){t.preventDefault();var o=e(this).data("target");n(e(o))})})}),e(document).ready(function(){require(["powerTip"],function(){e(".powertip").each(function(){var t=e(this),n=e(this).data().powertipPlacement;t.powerTip({placement:n,smartPlacement:!0})})})}),e(".btn-load-more").each(function(){return}),window.loadNewCompanyFields=function(n){var o=e(n),a=o.closest("form"),i=a.find('input[name="company"]'),r=a.find("#company-add-process-wrap"),s=o.val();if(s&&!i.val()){var l=o.data("filter")||{};l=e.extend({},l,{company_title:s}),window.xhrLoadNewCompanyFields=e.ajax({url:"/tmpl/partials/company-add-process",method:"post",data:l,success:function(e){r.html(e),t()}})}},e(document).on("click","#show-new-company-fields",function(n){n.preventDefault();var o=e(this).closest("form").find('input[name="company_title"]').val();e.get("/tmpl/partials/new-company-fields",function(n){var a=e(n),i=o.rus_about();a.find("#tell-more-about-caption").text("Расскажите нам больше "+i+" "+o),e("#company-add-process").html(a.html()),t()})}),e(function(){e("select").bind("updateNotValue",function(){var t=e(this);t.val()?t.removeClass("not-value"):t.addClass("not-value")}).trigger("updateNotValue"),e(document).on("change","select",function(){e(this).trigger("updateNotValue")})}),function(){function t(){var t=e(this),n=t.siblings(".maxlength-counter"),o=t.attr("maxlength"),a=t.val().length;n.text(a+" из "+o+" символов")}e("textarea[maxlength]").wrap('<div class="maxlength-wrap"></div>').before('<span class="minor gray maxlength-counter"></span>').bind("updateCounter",t).each(t).keypress(t).keyup(t),require(["autosize"],function(t){t(e("textarea.autosize"))})}(),e(document).on("click",".banner-close",function(t){t.preventDefault(),t.stopPropagation();var n=e(this).closest(".banner"),o=n.attr("id");e.post("/banner/dismiss",{id:o}),n.slideUp(function(){n.remove()})}),e(document).on("click",".close-tip",function(t){t.preventDefault(),t.stopPropagation();var n=e(this).closest(".tip");n.slideUp(function(){n.remove()})}),require(["showMessageModal","modal/alert","search"])});