define(["jquery","i18n"],function(e,r){var a=e("form#add-company-form"),t=a.closest(".panel"),n=e('<div class="panel-loader"><img src="/images/loading.svg" class="loader"></div>').appendTo(t).hide();a.submit(function(s){s.preventDefault(),e.ajax({url:a.attr("action"),type:a.attr("method"),data:a.serialize(),beforeSend:function(){a.find(".form-group").removeClass("has-error"),n.fadeIn()},complete:function(){n.fadeOut()},success:function(n){n.success?t.fadeOut(function(){t.replaceWith('<div class="alert alert-success text-center">'+r("Компания успешно добавлена")+"</div>")}):(n.errors=n.errors||[],e.each(n.errors,function(r,t){var n=a.find(".form-group."+r).addClass("has-error"),s=n.find(".text-danger");s.length||(s=e('<div class="text-danger small"></div>').prependTo(n)),s.text(t).fadeIn(100)}))}})})});