define(["jquery","modal","fancybox","editable"],function(n,e){function o(){var e=n(".image-modal");e.find(".editable").editable(),e.find(".delete").click(function(e){e.preventDefault(),n.post("/image/remove/"+n(this).data("id"),function(){n.fancybox.close(),window.location.reload()})}),e.find(".claim").click(function(e){e.preventDefault();var o=n(this).data("id");n("body").data("logged")?require(["modal/complain"],function(n){n("image",o)}):require(["modal/signin"],function(n){n()})})}var a={type:"ajax",padding:0,tpl:{next:'<button class="fancybox-nav fancybox-next"><i class="icon arrow-right"></i></but>',prev:'<button class="fancybox-nav fancybox-prev"><i class="icon arrow-left"></i></button>',closeBtn:e.close},scrolling:"no",wrapCSS:"image-modal-wrapper",helpers:{overlay:{locked:!1}},preload:10,loop:!1,openEffect:"none",closeEffect:"none",nextEffect:"none",prevEffect:"none",afterLoad:function(){n(this.content).find("img.image-modal-img").load(function(){n.fancybox.reposition(),o()})}};return function(e,o){var i=n.extend({},a,o);n.fancybox.open(e,i)}});